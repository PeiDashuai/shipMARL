# === AIS domain randomization config ===
seed_base: 2025

episode:
  sampling: default   # 先用固定档位方便复现

channel:
  ge:
    p_g2b: [0.02, 0.08]
    p_b2g: [0.15, 0.50]
    drop_bad: [0.85, 0.98]

  burst:
    enable: false

delay:
  lognormal_mu: [0.6, 2.0]
  lognormal_sigma: [0.10, 0.50]
  clip_max: [2.5, 8.0]

clock:
  enable: False
  offset_s: 20.0
  drift_ppm: 200.0

scheduler:
  base_period_s: 1.67
  jitter_frac: 0.3
  sog_mps_breaks: [0.0, 1.03, 2.57, 7.20, 11.83, 15.0]
  sog_period_s:   [6.0, 4.0, 2.0, 1.0, 0.5]
  drop_prob_on_idle: 0.0
  idle_thr_mps: 0.0

queue:
  # 报文在队列里最长活 20–60 s，避免“永远卡在队列里”
  ttl_s: [20.0, 60.0]
  max_inflight: [128, 4096]

obs:
  slot_K: 16
  slot_ttl_s: [30.0, 60.0]
  # age_cap 适当拉大一点，允许 EKF 看到 6–8 s 的“陈旧 AIS”
  age_cap_s: [5.0, 8.0]
  miss_mask: true

noise:
  position_m: [2.0, 4.0]
  sog_mps:    [0.1, 0.2]
  cog_deg:    [0.1, 0.2]
  regional_bias:
    enable: false
    rects: []

field_errors:
  mmsi_conflict_prob: 0.0
  type_missing_prob:   [0.0, 0.1]
  draft_missing_prob:  [0.0, 0.20]
  sog_zero_stick_prob: [0.0, 0.10]

reorder:
  # 先不引入乱序，免得 debug 太复杂
  enable: false
  prob: 0.0
  extra_delay_s: [0.0, 0.0]

gps_bias:
  # 为了看清 EKF 对“随机噪声 + 延迟”的作用，先不加静态偏置
  enable: false
  pos_bias_max_m: 0.0
  drift_max_mps: 0.0

logging:
  print_params: true
  export_episode_params: true
  export_link_samples: true
  link_samples_path: "./ais_link_samples.csv"
  export_reorder_samples: true
  reorder_samples_path: "ais_metrics_reorder.csv"
  clock_dbg_print: true
  clock_dbg_per_step_max: 6
